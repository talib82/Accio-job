<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JS Promise</title>
  <script>
    // Function to mock fetch behaviour

    // const fetchStudentDataFromServer = () => {
    //   return new Promise((resolve, reject) => {
    //     console.log('Fetching student data ...')
    //     setTimeout(() => {
    //       console.log('Data fetched successfully after 4 secs!')
    //       resolve([
    //         {
    //           name: 'Prajakta',
    //           batch: 'Batch 11',
    //         },
    //         {
    //           name: 'Pratik',
    //           batch: 'Batch 12',
    //         }
    //       ])
    //     }, 4000)
    //   })
    // }

    // fetchStudentDataFromServer().then(function (studentData) {
    //   return studentData.filter(student => {
    //     return student.batch === 'Batch 12'
    //   })
    // }).then(function (updatedStudentData) {
    //   console.log(updatedStudentData[0].name)
    // })

    // let promise = new Promise(function (resolve, reject) {
    //   resolve(' A ')
    // })

    // // Promise chaining
    // promise.then(function(resolvedMessage) {
    //   return resolvedMessage + ' B ' 
    // }).then(function(updatedMessage) {
    //   return updatedMessage + ' C '
    // }).then(function(updatedMessage2) {
    //   console.log(updatedMessage2)
    // })

    // let fetchInformationFromServer = new Promise(function (resolve, reject) {
    //   console.log('Fetching Data ...')
    //   setTimeout(function(){
    //     resolve('Fetched data successfully')
    //   }, 3000)
    // })

    // let processFetchedInformation = new Promise(function (resolve, reject) {
    //   setTimeout(function(){
    //     resolve('Processed fetched data successfully')
    //   }, 2000)
    // })

    // fetchInformationFromServer.then(function(resolvedMessage) {
    //   console.log(resolvedMessage)
    // })

    // processFetchedInformation.then(function(resolvedMessage) {
    //   console.log(resolvedMessage)
    // })

    // fetchInformationFromServer.then(function(resolvedMessage) {
    //   console.log(resolvedMessage)
    //   return processFetchedInformation
    // }).then(function(resolvedMessage) {
    //   console.log(resolvedMessage)
    // })

    /* ------ */

    const executeOrder = function () {
      return new Promise(function (resolve, reject) {
        console.log('Order placed')
        setTimeout(function () {
          console.log('Order Received!')
          console.log('Chef started preparing!')
          resolve()
        }, 1000)
      })
    }

    const addPizzaSauce = () => {
      return new Promise((resolve, reject) => {
        setTimeout(function () {
          console.log('Pizza Sauce added!')
          resolve()
        }, 1000)
      })
    }

    const addFirstCheezeLayer = () => {
      return new Promise((resolve, reject) => {
        setTimeout(function () {
          console.log('First layer of cheeze added!')
          resolve()
        }, 1000)
      })
    }

    const addToppings = () => {
      return new Promise((resolve, reject) => {
        setTimeout(function () {
          console.log('Toppings added!')
          resolve()
        }, 1000)
      })
    }

    const addFinalCheezeLayer = () => {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          console.log('Final layer of cheeze added!')
          resolve()
        }, 1000)
      })
    }

    const bakePizza = () => {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          console.log('Pizza baked!')
          resolve()
        }, 1000)
      })
    }

    const addOreganoAndPack = () => {
      return new Promise((resolve, reject) => {
        setTimeout(() => {
          console.log('Oregano added and packed!')
          resolve()
        }, 1000)
      })
    }

    executeOrder()
    .then(addPizzaSauce)
    .then(addFirstCheezeLayer)
    .then(addToppings)
    .then(addFinalCheezeLayer)
    .then(bakePizza)
    .then(addOreganoAndPack)
    .then(function () {
      console.log('The order is ready and handed over to the Zomato guy!')
    })


  </script>
</head>

<body>

</body>

</html>